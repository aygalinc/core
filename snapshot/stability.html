
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-05-04
 Rendered using Maven Reflow Skin 1.0.0 (http://andriusvelykis.github.com/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Stability and Extension | OW2 Chameleon - Core</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="./css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />
		
		<link href="http://yandex.st/highlightjs/7.3/styles/github.min.css" rel="stylesheet" />
		
		<link href="./css/lightbox.css" rel="stylesheet" />
		
		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
<link rel="stylesheet" href="css/font-awesome.css"/>
<link rel="stylesheet" href="css/orange.css" media="screen" type="text/css"/>
<link rel="stylesheet" href="css/style.css" media="screen" type="text/css"/>
	</head>

	<body class="page-stability project-chameleon-core" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top navbar-inverse">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html"><span class="color-highlight">OW2 Chameleon</span> ~ Core</a>
					<div class="nav-collapse">
						<ul class="nav pull-right">
							<li><a href="downloads.html" title="Download">Download </a></li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="chameleon-quickstart.html" title="Quickstart">Quickstart </a></li>
									<li><a href="chameleon-structure.html" title="Structure">Structure </a></li>
									<li><a href="chameleon-configuration.html" title="Configuration">Configuration </a></li>
									<li><a href="chameleon-directory-monitor.html" title="Deployment">Deployment </a></li>
									<li><a href="chameleon-vm-args.html" title="JVM Arguments">JVM Arguments </a></li>
									<li class="active"><a href="" title="Stability">Stability </a></li>
									<li><a href="chameleon-writing-your-own-deployer.html" title="Extend Deployment">Extend Deployment </a></li>
									<li><a href="chameleon-package.html" title="Package your Chameleon">Package your Chameleon </a></li>
									<li><a href="chameleon-service.html" title="Run as service">Run as service </a></li>
									<li><a href="apidocs/index.html" title="API">API </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="contribution.html" title="Contribute">Contribute </a></li>
									<li><a href="source-repository.html" title="Sources">Sources </a></li>
									<li><a href="http://github.com/ow2-chameleon/core/issues/" title="Issues" class="externalLink">Issues </a></li>
									<li><a href="http://github.com/ow2-chameleon/core" title="Fork on GitHub" class="externalLink">Fork on GitHub </a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="page-header">
 <h1 id="stability_and_extension">Stability and Extension</h1>
</div> 
<p>Theoretically, the architecture of a dynamic system is considered as stable when there are no change in progress. This concept is useful to determine when the system as complete its startup sequence, but also important ofter any deployment action that may have change the underlying architecture.</p> 
<p>Chameleon provides a service to wait for stability, but also let you add you own checks.</p> 
<h2 id="stability_service">Stability Service</h2> 
<p>The <code>org.ow2.chameleon.core.services.Stability</code> service is exposed by Chameleon itself, and let you wait for<br /> stability. The <code>waitForStability</code> method waits for stability and returns whether the stability has been reached. Be aware that this method blocks the caller thread until the stability is reached or until a timeout is reached. The <code>getStabilityResult</code> also waits for stability, but gives you more details about the different stability check.</p> 
<p>The <code>isStable</code> method checks if the system is stable. This check may block the caller threads, but for a reasonnable amount of time. </p> 
<h2 id="stability_computation">Stability Computation</h2> 
<p>By default, 3 checks are made in this order:</p> 
<ul> 
 <li>Bundle Stability - it waits for all bundles to reach their final state (<code>ACTIVE</code> or <code>RESOLVED</code> for fragments) (priority:0)</li> 
 <li>Service Stability - it waits until the number of published service is stable (check made on a time window) (priority:1)</li> 
 <li>iPOJO Stability - it waits until iPOJO has processed all bundles (meaning that factories and instances are created) (priority:2)</li> 
</ul> 
<h2 id="stability_computation_extension">Stability Computation Extension</h2> 
<p>It is possible to extend the check made to detect stability by exposing the <code>org.ow2.chameleon.core.services.StabilityChecker</code> service. The <code>getName</code> version defines the name of the checker (human-friendly). The <code>getPriority</code> method sets the check priority. This priority is used to determine the check order. You should not return an integer inferior to 3 (as 0, 1 and 2 are used by the core checks). Lower priorities are executed first. Finally, the <code>check</code> method computes the stability.</p> 
<p>The <code>check</code> method has to be <strong>blocking</strong> (it can rely on the <code>grace</code> method from the <code>org.ow2.chameleon.core.services.AbstractStabilityChecker</code> class), and check whether the stability has been reached. In addition, it must have a reasonnable timeout. Once reached, the check must return <code>StabilityResult.unstable(reson, cause)</code>. If the stability has been reached, the check must return <code>StabilityResult.stable()</code>.</p> 
<p>Extension needs to use the <code>grace</code> method and <code>getDefaultNumberOfAttempts</code> to block the caller thread and to know when they should declare the system as unstable.</p>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#stability_and_extension" title="Stability and Extension">Stability and Extension <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#stability_service" title="Stability Service">Stability Service</a>
		<li><a href="#stability_computation" title="Stability Computation">Stability Computation</a>
		<li><a href="#stability_computation_extension" title="Stability Computation Extension">Stability Computation Extension</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li>
							<a href="./" title="Home">Home </a>
						</li>
						<li>
							<a href="http://github.com/ow2-chameleon/core" title="GitHub project" class="externalLink">GitHub project </a>
						</li>
						<li>
							<a href="github-report.html" title="Release notes">Release notes </a>
						</li>
						<li class="nav-header">Download</li>
						<li>
							<a href="downloads.html" title="Download">Download </a>
						</li>
						<li>
							<a href="license.html" title="License">License </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Contribute</li>
						<li>
							<a href="contribution.html" title="Contribute">Contribute </a>
						</li>
						<li>
							<a href="source-repository.html" title="Sources">Sources </a>
						</li>
						<li>
							<a href="http://github.com/ow2-chameleon/core/issues/" title="Issues" class="externalLink">Issues </a>
						</li>
						<li>
							<a href="http://github.com/ow2-chameleon/core" title="Fork on GitHub" class="externalLink">Fork on GitHub </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li>
							<a href="chameleon-quickstart.html" title="Quickstart">Quickstart </a>
						</li>
						<li>
							<a href="chameleon-structure.html" title="Structure">Structure </a>
						</li>
						<li>
							<a href="chameleon-configuration.html" title="Configuration">Configuration </a>
						</li>
						<li>
							<a href="chameleon-directory-monitor.html" title="Deployment">Deployment </a>
						</li>
						<li>
							<a href="chameleon-vm-args.html" title="JVM Arguments">JVM Arguments </a>
						</li>
						<li class="active">
							<a href="#" title="Stability">Stability </a>
						</li>
						<li>
							<a href="chameleon-writing-your-own-deployer.html" title="Extend Deployment">Extend Deployment </a>
						</li>
						<li>
							<a href="chameleon-package.html" title="Package your Chameleon">Package your Chameleon </a>
						</li>
						<li>
							<a href="chameleon-service.html" title="Run as service">Run as service </a>
						</li>
						<li>
							<a href="apidocs/index.html" title="API">API </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote><span class="color-highlight">OW2 Chameleon</span> ~ core proposes a minimal OSGi distribution used to structure OSGi applications.</blockquote>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2009-2015 <a href="https://github.com/ow2-chameleon/core">OW2 Chameleon</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.10.8-SNAPSHOT. </span><span class="publishDate">Last Published: 2015-05-04. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='./js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="./js/bootstrap.min.js"></script>
	<script src="./js/lightbox.js"></script>
	<script src="./js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="./js/jquery.ba-bbq.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>
	
	</body>
</html>
